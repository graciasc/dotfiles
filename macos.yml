- hosts: localhost
  pre_tasks:
    - name: Install Homebrew
      shell: curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh
  tasks:
    - name: Update brew
      shell: brew update && brew upgrade
      tags:
        - updates

    - name: Install zsh
      homebrew: name=zsh

    - name: Install Node
      homebrew:
        name: ["nodejs", "npm"]

    - name: Install ohmyzsh
      shell: curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh
      tags:
        - zsh

    - name: Change shells
      shell: chsh
      tags:
      - zsh

    - name: Install autosuggestions
      ansible.builtin.git:
        repo: https://github.com/zsh-users/zsh-autosuggestions.git
        dest: ~/.oh-my-zsh/plugins/zsh-autosuggestions
      tags:
        - zsh

    - name: Install lazygit
      homebrew: name=lazygit

    - name: Install Tmux
      homebrew: name=tmux

    - name: Install neovim
      homebrew: name=neovim

    - name: Install ripgrep
      homebrew: name=ripgrep

    - name: Install Hammerspoon
      homebrew:
        name: hammerspoon
        state: present
        install_options: cask

    - name: Install docker
      homebrew: name=docker

    - name: Install git
      homebrew: name=git

    - name: Install personal nvim
      ansible.builtin.git:
        repo: "git@github.com:graciasc/nvim.git"
        dest: "{{ ansible_env.HOME }}/.config/nvim"
        clone: yes
        update: yes
        key_file: "{{ ansible_env.HOME}}/.ssh/id_ed25519"
